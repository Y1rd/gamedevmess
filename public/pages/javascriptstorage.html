<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1.0">
  	<title>Local Storage</title>
	<link rel="stylesheet" href="../style.css">
</head>
<body>
	<div class="bigbox">
        <div class="boxcontent">
            <h1>A personal list!</h1>
            <div class="boxcontentsmall">
                <p>Add items, remove them, or save them. Uses localStorage.</p>
                <input type="text" id="addList" placeholder="Add item..."><a role="button" class="button" onclick="storeText()">Add</a><br>
                <ul class="customlist">
                    <li class="finished">Test 1</li>
                    <li>Test 2</li>
                    <li>Test 3</li>
                </ul>
                <p id="notifier">...</p>
            </div>
        </div>
    </div>
    <script>
        // Variables
        let listStorage = localStorage.getItem('listText');
        let listText = document.getElementsByTagName('li');
        const listUl = document.querySelector('ul')
        const notifier = document.getElementById('notifier');

        // When the page loads, make sure our storage isn't empty
        document.addEventListener('DOMContentLoaded', () => {
            // Handle adding the close buttons
            for (i = 0; i < listText.length; i++) {
                var span = document.createElement('span');
                var txt = document.createTextNode("\u00D7");
                span.className = "close";
                span.appendChild(txt);
                span.onclick = closeList;
               listText[i].appendChild(span);
            }
        })

       // Toggle the crossout when clicking on a list item
        listUl.addEventListener('click', function(event) {
            if (event.target.tagName === 'LI') {
                event.target.classList.toggle('finished');
            }
        });

        // Get rid of a list item when we press the x button
        function closeList() {
            let listItem = this.parentElement;
            listItem.remove()
        }
    </script>
</body>
</html>